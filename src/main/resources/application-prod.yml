spring:

  datasource:
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
    username: ${DB_USER}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  data:
    redis:
      url: ${REDIS_URL}
      ssl:
        enabled: ${REDIS_SSL}

  mail:
    host: ${MAIL_HOST}
    port: ${MAIL_PORT}
    username: ${EMAIL_USERNAME}
    password: ${EMAIL_PASSWORD}

  jpa:
    hibernate:
      ddl-auto: update    #임시
    properties:
      hibernate:
        show_sql: false
        format_sql: false

  flyway:
    enabled: false    #임시
    baseline-on-migrate: true
    locations: classpath:db/migration/postgres

  security:
    login-limit:
      enabled: true           # 또는 false
      window-seconds: 300     # 예: 5분 윈도우
      max-attempts: 5         # 예: 5회
      lock-seconds: 600       # 예: 10분 잠금
      key-prefix: login:lim   # 있다면
      strategy: ip            # 있다면 (ip/user 등)


  oauth2:
    client:
      registration:
        google:
          client-id: ${GOOGLE_CLIENT_ID}
          client-secret: ${GOOGLE_CLIENT_SECRET}
        kakao:
          client-id: ${KAKAO_CLIENT_ID}
          client-secret: ${KAKAO_CLIENT_SECRET}
        naver:
          client-id: ${NAVER_CLIENT_ID}
          client-secret: ${NAVER_CLIENT_SECRET}

  api:
    base-url: https://api.dailyquest.app/api

  # 운영 CORS: 배포 도메인만
  cors:
    allowed-origins: https://dailyquest.app
    allowed-methods: GET,POST,PUT,PATCH,DELETE,OPTIONS
    allowed-headers: Authorization,Content-Type
    allow-credentials: true
    max-age: 3600

  springdoc:
    swagger-ui:
      enabled: false    # 운영에서 UI 차단 권장
    api-docs:
      enabled: false    # 필요시 프록시/인증 뒤에 둠

  management:
    endpoints:
      web:
        exposure:
          include: health
    endpoint:
      health:
        show-details: never

  server:
    port: ${PORT:8080}
    forward-headers-strategy: native
    compression:
      enabled: true
      mime-types: application/json,application/javascript,text/html,text/plain,text/css
      min-response-size: 1024
    error:
      whitelabel:
        enabled: false

  logging:
    level:
      root: INFO
      org.hibernate.SQL: WARN
      org.springframework.security: INFO
      com.dailyquest: INFO