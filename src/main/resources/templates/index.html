<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <th:block th:replace="fragments/config :: config"></th:block>
    <title>DailyQuest ë©”ì¸ í˜ì´ì§€</title>
    <link rel="stylesheet" th:href="@{/css/index.css}" />
    <script>
        window.__ENV = { API_BASE_URL: "http://localhost:8080" };
    </script>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="site-header">
        <div class="container header-inner">
            <h1 class="logo">
                <a th:href="@{/}">ğŸ® DailyQuest</a>
            </h1>
            <nav class="nav">
                <a th:href="@{/}" class="nav-link">í™ˆ</a>
                <a th:href="@{/login}" id="loginBtn" class="nav-link">ë¡œê·¸ì¸</a>
                <a th:href="@{/signup}" id="signupBtn" class="nav-link">íšŒì›ê°€ì…</a>
                <button type="button" id="logoutBtn" class="btn btn-outline">ë¡œê·¸ì•„ì›ƒ</button>
            </nav>
        </div>
    </header>

    <!-- íˆì–´ë¡œ -->
    <section class="hero">
        <div class="container">
            <h2 class="hero-title">ëª¨ë°”ì¼ ê²Œì„ ìˆ™ì œ, ê¹”ë”í•˜ê²Œ ì •ë¦¬í•˜ì</h2>
            <p class="hero-sub">
                ì—¬ëŸ¬ ê²Œì„ì˜ ì¼ì¼/ì£¼ê°„/ì´ë²¤íŠ¸ í€˜ìŠ¤íŠ¸ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ì„¸ìš”.
            </p>
            <span id="healthBadge">â€”</span>
        </div>
    </section>

    <!-- ì¸ì¦ ë°•ìŠ¤ -->
    <section class="container">
        <div id="auth-box" class="card auth-card">
            <div class="card-header">
                <span id="auth-state">ë¡œê·¸ì•„ì›ƒ ìƒíƒœ</span>
            </div>
            <div id="auth-detail" class="card-body" style="display:none">
                <div class="kv"><span>uid</span><b id="auth-username"></b></div>
                <div class="kv"><span>ê¶Œí•œ</span><b id="auth-role"></b></div>
                <div class="kv"><span>ë°œê¸‰</span><b id="auth-iat"></b></div>
                <div class="kv"><span>ë§Œë£Œ</span><b id="auth-exp"></b></div>
            </div>
        </div>
    </section>

    <!-- ê¸°ëŠ¥ ìš”ì•½ -->
    <section class="container features">
        <h3 class="section-title">ê¸°ëŠ¥ ìš”ì•½</h3>
        <ul class="feature-grid">
            <li class="feature">
                <h4>âœ… í€˜ìŠ¤íŠ¸ ê´€ë¦¬</h4>
                <p>ì¼ì¼/ì£¼ê°„/ì›”ê°„/ë¹„ì •ê¸° ê³¼ì œ ë“±ë¡ê³¼ ì²´í¬</p>
            </li>
            <li class="feature">
                <h4>ğŸ”” ì•Œë¦¼</h4>
                <p>ë§ˆê° ì „ ì•Œë¦¼ìœ¼ë¡œ ë†“ì¹˜ì§€ ì•Šê²Œ</p>
            </li>
            <li class="feature">
                <h4>ğŸ“Š í†µê³„</h4>
                <p>ì§„í–‰ë¥ ê³¼ íˆìŠ¤í† ë¦¬ë¥¼ ì‹œê°í™”</p>
            </li>
        </ul>
    </section>

    <!-- ì½œíˆ¬ì•¡ì…˜ -->
    <section class="container cta">
        <h3>ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ë³´ì„¸ìš”!</h3>
    </section>

    <!-- í‘¸í„° -->
    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2025 DailyQuest</p>
        </div>
    </footer>
<script type="module" th:src="@{/js/apiClient.js}"></script>
<script th:src="@{/js/pages/authcheck.js}"></script>
<script th:src="@{/js/pages/logout.js}"></script>
<script th:src="@{/js/abc.js}"></script>
    <script>
        (async () => {
          try {
            const r = await fetch("/health", { credentials: "include" });
            const h = await r.json();
            const ok = h.success && h.status === "UP";
            const el = document.getElementById("healthBadge");
            el.textContent = `${ok ? "ğŸŸ¢" : "ğŸ”´"} v${h.version} (${h.profile}) #${h.commit}`;
            el.title = new Date(h.timestamp).toLocaleString();
          } catch {
            document.getElementById("healthBadge").textContent = "ğŸ”´ health error";
          }
        })();
    </script>

</body>
</html>